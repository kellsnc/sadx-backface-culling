#include "pch.h"
#include "SADXModLoader.h"
#include "materials.h"

DataPointer(NJS_MATERIAL, matlist_itembox_boxbody_item_panel, 0x8BE1C8);
DataArray(NJS_MATERIAL, matlist_fence00_fen01_fen01, 0x2693960, 4);

NJS_MATERIAL* land_patches_windy_valley[] = {
	// Act 3 roads
	(NJS_MATERIAL*)0xb2f018,
	(NJS_MATERIAL*)0xb2f02c,
	(NJS_MATERIAL*)0xb44698,
	(NJS_MATERIAL*)0xb446ac,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb3622c,
	(NJS_MATERIAL*)0xb36240,
	(NJS_MATERIAL*)0xb33378,
	(NJS_MATERIAL*)0xb3338c,
	(NJS_MATERIAL*)0xb333a0,
	(NJS_MATERIAL*)0xb2f018,
	(NJS_MATERIAL*)0xb2f02c,
	(NJS_MATERIAL*)0xb150d4,
	(NJS_MATERIAL*)0xb150e8,
	(NJS_MATERIAL*)0xb2ca00,
	(NJS_MATERIAL*)0xb2ca14,
	(NJS_MATERIAL*)0xb2ca28,
	(NJS_MATERIAL*)0xb29d58,
	(NJS_MATERIAL*)0xb29d6c,
	(NJS_MATERIAL*)0xb259f0,
	(NJS_MATERIAL*)0xb25a04,
	(NJS_MATERIAL*)0xb22598,
	(NJS_MATERIAL*)0xb225ac,
	(NJS_MATERIAL*)0xb20008,
	(NJS_MATERIAL*)0xb2001c,
	(NJS_MATERIAL*)0xb4a948,
	(NJS_MATERIAL*)0xb4a95c,
	(NJS_MATERIAL*)0xb2f018,
	(NJS_MATERIAL*)0xb2f02c,
	(NJS_MATERIAL*)0xb4771c,
	(NJS_MATERIAL*)0xb2f018,
	(NJS_MATERIAL*)0xb2f02c,
	(NJS_MATERIAL*)0xb498e8,
	(NJS_MATERIAL*)0xb150d4,
	(NJS_MATERIAL*)0xb150e8,
	(NJS_MATERIAL*)0xb4a948,
	(NJS_MATERIAL*)0xb4a95c,
	(NJS_MATERIAL*)0xb2ca00,
	(NJS_MATERIAL*)0xb2ca14,
	(NJS_MATERIAL*)0xb2ca28,
	(NJS_MATERIAL*)0xb29d58,
	(NJS_MATERIAL*)0xb29d6c,
	(NJS_MATERIAL*)0xb259f0,
	(NJS_MATERIAL*)0xb25a04,
	(NJS_MATERIAL*)0xb22598,
	(NJS_MATERIAL*)0xb225ac,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb2f018,
	(NJS_MATERIAL*)0xb2f02c,
	(NJS_MATERIAL*)0xb20008,
	(NJS_MATERIAL*)0xb2001c,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb2ca00,
	(NJS_MATERIAL*)0xb2ca14,
	(NJS_MATERIAL*)0xb2ca28,
	(NJS_MATERIAL*)0xb29d58,
	(NJS_MATERIAL*)0xb29d6c,
	(NJS_MATERIAL*)0xb259f0,
	(NJS_MATERIAL*)0xb25a04,
	(NJS_MATERIAL*)0xb22598,
	(NJS_MATERIAL*)0xb225ac,
	(NJS_MATERIAL*)0xb20008,
	(NJS_MATERIAL*)0xb2001c,
	(NJS_MATERIAL*)0xb2f018,
	(NJS_MATERIAL*)0xb2f02c,
	(NJS_MATERIAL*)0xb150d4,
	(NJS_MATERIAL*)0xb150e8,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb56188,
	(NJS_MATERIAL*)0xb5619c,
	(NJS_MATERIAL*)0xb316a0,
	(NJS_MATERIAL*)0xb316b4,
	(NJS_MATERIAL*)0xb316c8,
	(NJS_MATERIAL*)0xb462a8,
	(NJS_MATERIAL*)0xb462bc,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb3e500,
	(NJS_MATERIAL*)0xb3e514,
	(NJS_MATERIAL*)0xb3e528,
	(NJS_MATERIAL*)0xb353e8,
	(NJS_MATERIAL*)0xb353fc,
	(NJS_MATERIAL*)0xb316a0,
	(NJS_MATERIAL*)0xb316b4,
	(NJS_MATERIAL*)0xb316c8,
	(NJS_MATERIAL*)0xb1b6d8,
	(NJS_MATERIAL*)0xb1b6ec,
	(NJS_MATERIAL*)0xb1b700,
	(NJS_MATERIAL*)0xb1b714,
	(NJS_MATERIAL*)0xb2e030,
	(NJS_MATERIAL*)0xb2e044,
	(NJS_MATERIAL*)0xb2b750,
	(NJS_MATERIAL*)0xb2b764,
	(NJS_MATERIAL*)0xb28128,
	(NJS_MATERIAL*)0xb2813c,
	(NJS_MATERIAL*)0xb243f0,
	(NJS_MATERIAL*)0xb24404,
	(NJS_MATERIAL*)0xb215f8,
	(NJS_MATERIAL*)0xb2160c,
	(NJS_MATERIAL*)0xb51328,
	(NJS_MATERIAL*)0xb5133c,
	(NJS_MATERIAL*)0xb316a0,
	(NJS_MATERIAL*)0xb316b4,
	(NJS_MATERIAL*)0xb316c8,
	(NJS_MATERIAL*)0xb48a7c,
	(NJS_MATERIAL*)0xb48a90,
	(NJS_MATERIAL*)0xb14908,
	(NJS_MATERIAL*)0xb316a0,
	(NJS_MATERIAL*)0xb316b4,
	(NJS_MATERIAL*)0xb316c8,
	(NJS_MATERIAL*)0xb4a2e4,
	(NJS_MATERIAL*)0xb4a2f8,
	(NJS_MATERIAL*)0xb1b6d8,
	(NJS_MATERIAL*)0xb1b6ec,
	(NJS_MATERIAL*)0xb1b700,
	(NJS_MATERIAL*)0xb1b714,
	(NJS_MATERIAL*)0xb51328,
	(NJS_MATERIAL*)0xb5133c,
	(NJS_MATERIAL*)0xb2e030,
	(NJS_MATERIAL*)0xb2e044,
	(NJS_MATERIAL*)0xb2b750,
	(NJS_MATERIAL*)0xb2b764,
	(NJS_MATERIAL*)0xb28128,
	(NJS_MATERIAL*)0xb2813c,
	(NJS_MATERIAL*)0xb243f0,
	(NJS_MATERIAL*)0xb24404,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb316a0,
	(NJS_MATERIAL*)0xb316b4,
	(NJS_MATERIAL*)0xb316c8,
	(NJS_MATERIAL*)0xb215f8,
	(NJS_MATERIAL*)0xb2160c,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb2e030,
	(NJS_MATERIAL*)0xb2e044,
	(NJS_MATERIAL*)0xb2b750,
	(NJS_MATERIAL*)0xb2b764,
	(NJS_MATERIAL*)0xb28128,
	(NJS_MATERIAL*)0xb2813c,
	(NJS_MATERIAL*)0xb243f0,
	(NJS_MATERIAL*)0xb24404,
	(NJS_MATERIAL*)0xb215f8,
	(NJS_MATERIAL*)0xb2160c,
	(NJS_MATERIAL*)0xb316a0,
	(NJS_MATERIAL*)0xb316b4,
	(NJS_MATERIAL*)0xb316c8,
	(NJS_MATERIAL*)0xb1b6d8,
	(NJS_MATERIAL*)0xb1b6ec,
	(NJS_MATERIAL*)0xb1b700,
	(NJS_MATERIAL*)0xb1b714,
	(NJS_MATERIAL*)0xb14c00,
	(NJS_MATERIAL*)0xb14c14,
	(NJS_MATERIAL*)0xb14c28,
	(NJS_MATERIAL*)0xb1b200,
	(NJS_MATERIAL*)0xb1b214,
	(NJS_MATERIAL*)0xb1b228,
	(NJS_MATERIAL*)0xb1b200,
	(NJS_MATERIAL*)0xb1b214,
	(NJS_MATERIAL*)0xb1b228
};

NJS_MATERIAL* land_patches_speed_highway[] = {
	// Act 1
	(NJS_MATERIAL*)0x25DABFC,
	(NJS_MATERIAL*)0x25DD248,

	// Act 2
	(NJS_MATERIAL*)0x2582324,
};

void PatchMaterials()
{
	// Itembox item card
	matlist_itembox_boxbody_item_panel.attrflags |= NJD_FLAG_DOUBLE_SIDE;

	// Tornado 2 hatch
	ADV02_OBJECTS[69]->basicdxmodel->mats[0].attrflags |= NJD_FLAG_DOUBLE_SIDE;
	ADV02_OBJECTS[70]->basicdxmodel->mats[0].attrflags |= NJD_FLAG_DOUBLE_SIDE;
	ADV02_OBJECTS[71]->basicdxmodel->mats[0].attrflags |= NJD_FLAG_DOUBLE_SIDE;
	ADV02_OBJECTS[71]->basicdxmodel->mats[1].attrflags |= NJD_FLAG_DOUBLE_SIDE;

	// Speed Highway blue fences
	matlist_fence00_fen01_fen01[0].attrflags |= NJD_FLAG_DOUBLE_SIDE;
	matlist_fence00_fen01_fen01[3].attrflags |= NJD_FLAG_DOUBLE_SIDE;

	for (auto& mat : land_patches_windy_valley)
	{
		mat->attrflags |= NJD_FLAG_DOUBLE_SIDE;
	}

	for (auto& mat : land_patches_speed_highway)
	{
		mat->attrflags |= NJD_FLAG_DOUBLE_SIDE;
	}
}